!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],e):(t.__tmp9z=t.__tmp9z||{},t.__tmp9z.extend=e(t.elliptical.utils),t.returnExports=t.__tmp9z.extend)}(this,function(t){t.array.makeArray,t.object.isFunction,Array.isArray,t.array.concatArgs;return function(){var t,e,n,r,a=arguments[0]||{},i=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},i=2);s>i;i++)if(null!==(t=arguments[i]))for(e in t)if(n=a[e],r=t[e],a!==r)if(l&&r&&(object.isPlainObject(r)||Array.isArray(r))){var u=n&&(object.isPlainObject(n)||Array.isArray(n))?n:Array.isArray(r)?[]:{};a[e]=extend(l,u,r)}else"undefined"!=typeof r&&(a[e]=r);return a}}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils"),require("./extend")):"function"==typeof define&&define.amd?define(["elliptical-utils","./extend"],e):(t.elliptical=t.elliptical||{},t.elliptical.Class=e(t.elliptical.utils,t.__tmp9z.extend),t.returnExports=t.elliptical.Class)}(this,function(t,e){var n=t.array.makeArray,r=t.object.isFunction,a=Array.isArray,i=t.array.concatArgs,s=!1,l=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,u=function(t,e,n){n=n||t;for(var a in t)n[a]=r(t[a])&&r(e[a])&&l.test(t[a])?function(t,n){return function(){var r,a=this._super;return this._super=e[t],r=n.apply(this,arguments),this._super=a,r}}(a,t[a]):t[a]},o=function(){arguments.length&&o.extend.apply(o,arguments)};return e(o,{proxy:function(t){var e,s=n(arguments);t=s.shift(),a(t)||(t=[t]),e=this;for(var l=0;l<t.length;l++)if("string"==typeof t[l]&&!r(this[t[l]]))throw"class.js "+(this.fullName||this.Class.fullName)+" does not have a "+t[l]+"method!";return function(){for(var n,r,l=i(s,arguments),u=t.length,o=0;u>o;o++)r=t[o],r&&(n="string"==typeof r,n&&e._set_called&&(e.called=r),l=(n?e[r]:r).apply(e,l||[]),u-1>o&&(l=!a(l)||l._use_call?[l]:l));return l}},newInstance:function(){var t,e=this.rawInstance();return e.setup&&(t=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,a(t)?t:arguments),e},setup:function(t,n){return this.defaults=e(!0,{},t.defaults,this.defaults),arguments},rawInstance:function(){s=!0;var t=new this;return s=!1,t},extend:function(t,n){function r(){return s?void 0:this.constructor!==r&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}n||(n=t,t=null),n=n||{};var a,l=this,o=this.prototype;s=!0,a=new this,s=!1,u(n,o,a);for(name in this)this.hasOwnProperty(name)&&-1==["prototype","defaults"].indexOf(name)&&(r[name]=this[name]);u(t,this,r),e(r,{prototype:a,constructor:r}),r.prototype.Class=r.prototype.constructor=r;var p=r.setup.apply(r,i([l],arguments));return r.init&&r.init.apply(r,p||[]),r}}),o.callback=o.prototype.callback=o.prototype.proxy=o.proxy,o});